# AsyncPgMigrator


**AsyncPgMigrator** ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è SQL-–º–∏–≥—Ä–∞—Ü–∏–π. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—è –∏—Å—Ç–æ—Ä–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä—è—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã —Ñ–∞–π–ª–æ–≤.

## üöÄ Key Features

*   **Manual Ordering:** –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π —è–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ Python-—Ñ–∞–π–ª–µ, —á—Ç–æ –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–æ—Ç–æ–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
*   **File-Based Migrations:** –í—Å—è –ª–æ–≥–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö `.sql` —Ñ–∞–π–ª–∞—Ö.
*   **Flexible Organization:** –í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å `.sql` —Ñ–∞–π–ª—ã –ø–æ –ø–∞–ø–∫–∞–º. –°–∏—Å—Ç–µ–º–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É, –∞ –Ω–µ –ø–æ –ø—É—Ç–∏.
*   **Integrity Protection:** –ö–∞–∂–¥–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ö—ç—à–∞ **SHA-256**. –ï—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω –±—ã–ª –ø—Ä–∏–º–µ–Ω–µ–Ω, —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ.

> **Note:** –¢–µ–∫—É—â–∏–π —Ä–∞—Å—á–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø—Ä–æ–±–µ–ª—ã. –õ–æ–≥–∏–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤) –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É–¥—É—â–∏—Ö —Ä–µ–ª–∏–∑–∞—Ö.

## üìä Logging System

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –≤ –∫–æ–Ω—Å–æ–ª–∏:

| **`[O]`** | **Applied** | –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤ –ë–î. |

| **`[X]`** | **Skipped** | –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Ç–∞–∫–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º–æ–π —É–∂–µ –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. |

| **`[!]`** | **Failed** | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ—Ä–≤–∞–Ω–æ, –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—á–µ–Ω—ã. |

| **`[~]`** | **Error Trace** | –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å–∏—Å—Ç–µ–º—ã. |

| **`[M]`** | **Message** | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—É—Ç–∏ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞). |

| **`[R]`** | **Result** | –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã. |

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å:
```text
[X] skipped: /home/user/example_migrations/create_users.sql
[X] skipped: /home/user/example_migrations/folder1/add_column_name_users.sql
[M] info migration:
    Update filename [
        create_cart2.sql -> 
        create_cart.sql
    ]
    Update ABS Path [
        /home/user/example_migrations/folder3/create_cart2.sql -> 
        /home/user/example_migrations/folder1/folder2/create_cart.sql
    ]
[X] skipped: /home/user/example_migrations/folder1/folder2/create_cart.sql
[M] info migration:
    Update filename [
        create_cart.sql -> 
        create_cart2.sql
    ]
    Update ABS Path [
        /home/user/example_migrations/folder1/folder2/create_cart.sql -> 
        /home/user/example_migrations/folder3/create_cart2.sql
    ]
[X] skipped: /home/user/example_migrations/folder3/create_cart2.sql
[R] result:  4 / 4 [100.0%]
    applied:  4
    skipped:  0
[M] 2026-02-19 18:17:21 | 2dadaad3 | /home/user/example_migrations/create_users.sql
[M] 2026-02-19 18:17:21 | 7c634a45 | /home/user/example_migrations/folder1/add_column_name_users.sql
[M] 2026-02-19 18:17:21 | 82d4cc03 | /home/user/example_migrations/folder3/create_cart2.sql
```

### üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ –∏—Ö **–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º–µ (SHA-256)**. –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—É—Ç–∏ –∏–ª–∏ –∏–º–µ–Ω–∏ (`[M] Update...`) –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –¥–≤–µ —Ä–∞–∑–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏:

1. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–ù–æ—Ä–º–∞–ª—å–Ω–æ):** –í—ã –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ —Ñ–∞–π–ª. –°–∏—Å—Ç–µ–º–∞ –æ–¥–∏–Ω —Ä–∞–∑ –æ–±–Ω–æ–≤–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –ë–î, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–û—à–∏–±–∫–∞):** –ï—Å–ª–∏ —Ç–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ **–∫–∞–∂–¥–æ–º** –∑–∞–ø—É—Å–∫–µ, –∑–Ω–∞—á–∏—Ç, –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞ —Å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º**.
    * **–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ ¬´–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç¬ª –∑–∞–ø–∏—Å—å –≤ –ë–î –º–µ–∂–¥—É –¥–≤—É–º—è –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤.
    * **–†–µ—à–µ–Ω–∏–µ:** –ù–∞–π–¥–∏—Ç–µ –¥—É–±–ª–∏—Ä—É—é—â—É—é –º–∏–≥—Ä–∞—Ü–∏—é (—Ñ–∞–π–ª —Å —Ç–µ–º –∂–µ SQL-–∫–æ–¥–æ–º) –∏ —É–¥–∞–ª–∏—Ç–µ –ª–∏—à–Ω–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä.


## üì¶ Installation

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ—á–∫—É –≤ requirements.txt —É–∫–∞–∑–∞–≤ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é.

```bash
migrations @ git+https://github.com/pirratoz/migrations@v0.1.1
```